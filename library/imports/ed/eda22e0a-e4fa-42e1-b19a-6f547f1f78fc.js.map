{"version":3,"sources":["assets\\script\\layer\\SettingLayer.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Created by carolsail\r\n\r\nimport { ENUM_AUDIO_CLIP, ENUM_GAME_EVENT, ENUM_UI_TYPE } from \"../Enum\";\r\nimport { StaticInstance } from './../StaticInstance';\r\nimport AudioManager from \"../manager/AudioManager\";\r\nimport BaseLayer from \"./Baselayer\";\r\nimport DataManager from \"../manager/DataManager\";\r\nimport EventManager from \"../manager/EventManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class SettingLayer extends BaseLayer {\r\n\r\n    @property(cc.Node)\r\n    musicNode: cc.Node = null\r\n    @property(cc.Node)\r\n    soundNode: cc.Node = null\r\n    @property(cc.Node)\r\n    vibrateNode: cc.Node = null\r\n    @property(cc.Node)\r\n    gamemusicNode: cc.Node = null\r\n    @property(cc.Node)\r\n    gamesoundNode: cc.Node = null\r\n    @property(cc.Node)\r\n    gamevibrateNode: cc.Node = null\r\n    @property(cc.Node)\r\n    mainSettingNode: cc.Node = null\r\n    @property(cc.Node)\r\n    gameSettingNode: cc.Node = null\r\n\r\n    protected onEnable(): void {\r\n        EventManager.instance.on(ENUM_GAME_EVENT.RENDOR_HOME_BTN, this.setHomeBtn, this)\r\n        this.rendorMusic()\r\n        this.rendorSound()\r\n        this.rendorVibrate()\r\n        // 游戏中调起setting的时候要暂停timer\r\n        EventManager.instance.emit(ENUM_GAME_EVENT.TIMER_STOP)\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        EventManager.instance.off(ENUM_GAME_EVENT.RENDOR_HOME_BTN, this.setHomeBtn)\r\n        // 游戏中关闭setting的时候要暂停timer\r\n        EventManager.instance.emit(ENUM_GAME_EVENT.TIMER_START)\r\n    }\r\n\r\n    onCloseClick(){\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        StaticInstance.uiManager.toggle(ENUM_UI_TYPE.SETTING, false)\r\n    }\r\n\r\n    onHomeClick(){\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        StaticInstance.uiManager.toggle(ENUM_UI_TYPE.GAME, false)\r\n        StaticInstance.uiManager.toggle(ENUM_UI_TYPE.SETTING, false)\r\n        StaticInstance.uiManager.toggle(ENUM_UI_TYPE.MENU, true)\r\n    }\r\n\r\n    onMusicClick(){\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        DataManager.instance.audioMusic = !DataManager.instance.audioMusic\r\n        if(DataManager.instance.audioMusic){\r\n            AudioManager.instance.playMusic()\r\n        }else{\r\n            AudioManager.instance.stopMusic()\r\n        }\r\n        this.rendorMusic()\r\n    }\r\n\r\n    onSoundClick(){\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        DataManager.instance.audioSound = !DataManager.instance.audioSound\r\n        this.rendorSound()\r\n    }\r\n\r\n    onVibrateClick(){\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        DataManager.instance.vibrate = !DataManager.instance.vibrate\r\n        this.rendorVibrate()\r\n    }\r\n\r\n    setHomeBtn(status: boolean = true){\r\n        this.mainSettingNode.active = !status\r\n        this.gameSettingNode.active = status\r\n    }\r\n\r\n    rendorMusic(){\r\n        // this.musicNode.getChildByName('on').active = DataManager.instance.audioMusic\r\n        this.musicNode.getChildByName('off').active = !DataManager.instance.audioMusic\r\n        // this.gamemusicNode.getChildByName('on').active = DataManager.instance.audioMusic\r\n        this.gamemusicNode.getChildByName('off').active = !DataManager.instance.audioMusic\r\n    }\r\n    \r\n    rendorSound(){\r\n        // this.soundNode.getChildByName('on').active = DataManager.instance.audioSound\r\n        this.soundNode.getChildByName('off').active = !DataManager.instance.audioSound\r\n        // this.gamesoundNode.getChildByName('on').active = DataManager.instance.audioSound\r\n        this.gamesoundNode.getChildByName('off').active = !DataManager.instance.audioSound\r\n    }\r\n\r\n    rendorVibrate(){\r\n        // this.soundNode.getChildByName('on').active = DataManager.instance.audioSound\r\n        this.vibrateNode.getChildByName('off').active = !DataManager.instance.vibrate\r\n        // this.gamesoundNode.getChildByName('on').active = DataManager.instance.audioSound\r\n        this.gamevibrateNode.getChildByName('off').active = !DataManager.instance.vibrate\r\n    }\r\n}\r\n"]}