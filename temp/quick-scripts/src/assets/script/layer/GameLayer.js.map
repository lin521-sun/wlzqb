{"version":3,"sources":["assets\\script\\layer\\GameLayer.ts"],"names":[],"mappings":";;;;;AAAA,uBAAuB;;;;;;;;;;;;;;;;;;;;;AAEvB,kCAA6B;AAC7B,gCAA+G;AAC/G,wDAAmD;AACnD,sDAAiD;AACjD,wDAAmD;AACnD,oDAA+C;AAC/C,oCAA+B;AAC/B,oDAAmD;AAEnD,yCAAoC;AAE9B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAuC,6BAAS;IAAhD;QAAA,qEAmoBC;QAhoBG,cAAQ,GAAmB,IAAI,CAAA;QAE/B,cAAQ,GAAmB,IAAI,CAAA;QAE/B,gBAAU,GAAa,IAAI,CAAA;QAE3B,eAAS,GAAY,IAAI,CAAA;QAEzB,cAAQ,GAAY,IAAI,CAAA;QAExB,eAAS,GAAa,IAAI,CAAA;QAC1B,OAAO;QACP,cAAQ,GAAY,KAAK,CAAA;QACzB,mBAAa,GAAW,CAAC,CAAA;QACzB,IAAI;QACJ,gBAAU,GAAY,KAAK,CAAA;QAC3B,eAAS,GAAY,KAAK,CAAA;QAC1B,kBAAY,GAAY,KAAK,CAAA;QAC7B,aAAO,GAAY,KAAK,CAAA;QACxB,iBAAW,GAAY,KAAK,CAAA;QAC5B,qBAAe,GAAY,IAAI,CAAC;QAChC,oBAAc,GAAY,IAAI,CAAC;QAE/B,cAAQ,GAAc,IAAI,CAAA;QAE1B,aAAO,GAAc,IAAI,CAAA;QAEzB,gBAAU,GAAc,IAAI,CAAA;QAE5B,WAAK,GAAc,IAAI,CAAA;QAEvB,eAAS,GAAc,IAAI,CAAA;QAC3B,kBAAY,GAAY,KAAK,CAAA;QAC7B,iBAAW,GAAY,KAAK,CAAA;QAC5B,oBAAc,GAAY,KAAK,CAAA;QAC/B,eAAS,GAAY,KAAK,CAAA;QAC1B,mBAAa,GAAY,KAAK,CAAA;QAC9B,mBAAa,GAAW,CAAC,CAAA;QACzB,kBAAY,GAAW,CAAC,CAAA;QACxB,qBAAe,GAAW,CAAC,CAAA;QAC3B,gBAAU,GAAW,CAAC,CAAA;QACtB,oBAAc,GAAW,CAAC,CAAA;;IAulB9B,CAAC;IArlBa,0BAAM,GAAhB;QAAA,iBAaC;QAZG,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QACtF,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC,OAAO,EAAE;YAC7B,KAAI,CAAC,WAAW,EAAE,CAAA;QACtB,CAAC,EAAE,IAAI,CAAC,CAAA;QACR,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAA;QACzF,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,OAAO,EAAE;YAC5B,KAAI,CAAC,SAAS,EAAE,CAAC;QACrB,CAAC,EAAE,IAAI,CAAC,CAAA;QACR,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;YACf,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,KAAK,CAAC;YACpC,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;SACtC;IACL,CAAC;IAES,4BAAQ,GAAlB;QACI,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACrE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACjE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACpE,sBAAY,CAAC,QAAQ,CAAC,EAAE,CAAC,sBAAe,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAA;QAC9E,sBAAY,CAAC,QAAQ,CAAC,EAAE,CAAC,sBAAe,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;QAC5E,sBAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAe,CAAC,YAAY,CAAC,CAAA;QACxD,SAAS;QACT,IAAI,IAAI,CAAC,UAAU;YAAE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;QAC5C,IAAI,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;QAC1C,IAAI,IAAI,CAAC,YAAY;YAAE,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;QAChD,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;QACtC,IAAI,IAAI,CAAC,WAAW;YAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;QAC9C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;IAC3B,CAAC;IAED,kCAAc,GAAd;QACI,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;QACtD,+BAAc,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAY,CAAC,OAAO,CAAC,CAAA;QACrD,sBAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAe,CAAC,eAAe,EAAE,IAAI,CAAC,CAAA;IACrE,CAAC;IAED,UAAU;IACV,8BAAU,GAAV;QAAA,iBA2CC;QA1CG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;YACxC,IAAM,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAA;YACxC,IAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAA;YAC1C,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;gBAC3C,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;gBACrB,IAAI,GAAG,GAAG,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBAChD,IAAI,KAAK,IAAI,CAAC,EAAE;oBACZ,GAAG,GAAG,GAAG,GAAG,KAAI,CAAC,YAAY,CAAC;iBACjC;gBACD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,KAAG,GAAK,CAAA;aACxE;iBACI,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,aAAa,GAAG,CAAC,IAAI,KAAI,CAAC,YAAY,CAAC,EAAE;gBACpE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,KAAG,KAAI,CAAC,aAAe,CAAA;aACvF;iBACI,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,YAAY,GAAG,CAAC,IAAI,KAAI,CAAC,WAAW,CAAC,EAAE;gBAClE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,KAAG,KAAI,CAAC,YAAc,CAAA;aACtF;iBACI,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,eAAe,GAAG,CAAC,IAAI,KAAI,CAAC,cAAc,CAAC,EAAE;gBACxE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,KAAG,KAAI,CAAC,eAAiB,CAAA;aACzF;iBACI,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,UAAU,GAAG,CAAC,IAAI,KAAI,CAAC,SAAS,CAAC,EAAE;gBAC9D,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,KAAG,KAAI,CAAC,UAAY,CAAA;aACpF;iBACI,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,cAAc,GAAG,CAAC,IAAI,KAAI,CAAC,aAAa,CAAC,EAAE;gBACtE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;gBACrB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,KAAG,KAAI,CAAC,cAAgB,CAAA;aACxF;iBACI;gBACD,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBACpB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;aACvB;QACL,CAAC,CAAC,CAAA;IACN,CAAC;IAED,gCAAY,GAAZ;QACI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,qBAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,IAAI,CAAA;IACzE,CAAC;IAED,+BAAW,GAAX;QACI,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,qBAAW,CAAC,QAAQ,CAAC,UAAU,GAAG,qBAAW,CAAC,QAAQ,CAAC,gBAAgB,CAAA;IACpG,CAAC;IAED,+BAAW,GAAX,UAAY,MAAe,EAAE,UAAsB;QAAtB,2BAAA,EAAA,cAAsB;QAC/C,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;YAC/D,IAAI,CAAC,MAAM,GAAG,UAAU,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAA;QACrD,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAA;IACjC,CAAC;IAED,QAAQ;IACR,kCAAc,GAAd;QAAA,iBA8CC;QA7CG,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,MAAM;YAAE,OAAM;QAClE,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;QACtD,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;YACxC,IAAI,IAAI,CAAC,aAAa,GAAG,CAAC,EAAE;gBACxB,QAAQ;gBACR,qBAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;oBACnC,IAAI,IAAI,CAAC,MAAM,IAAI,yBAAkB,CAAC,KAAK;wBAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;gBAC3E,CAAC,CAAC,CAAA;gBACF,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;gBACzB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAA;gBACtB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;gBACtB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;gBACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;gBACpB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;gBACxB,IAAI,IAAI,CAAC,YAAY,EAAE;oBACnB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC5B;aACJ;iBACI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACzB,oBAAU,CAAC,QAAQ,CAAC,WAAW,CAAC;oBAC5B,0BAA0B;oBAC1B,yCAAyC;oBACzC,KAAI,CAAC,aAAa,IAAI,CAAC,CAAC;oBACxB,KAAI,CAAC,UAAU,EAAE,CAAA;oBACjB,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;gBAC7B,CAAC,EAAE;oBACC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;gBACzB,CAAC,CAAC,CAAA;aACL;SACJ;aACI;YACD,QAAQ;YACR,qBAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;gBACnC,IAAI,IAAI,CAAC,MAAM,IAAI,yBAAkB,CAAC,KAAK;oBAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;YAC3E,CAAC,CAAC,CAAA;YACF,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;YACzB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAA;YACtB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;YACtB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;YACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;YACpB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;YACxB,IAAI,IAAI,CAAC,YAAY,EAAE;gBACnB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC5B;SACJ;IACL,CAAC;IAED,YAAY;IACZ,iCAAa,GAAb;QAAA,iBAgDC;QA/CG,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,MAAM;YAAE,OAAM;QAClE,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;QACtD,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;YACxC,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC,EAAE;gBACvB,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;gBACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;gBACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;gBACrB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;gBACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;gBACpB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;gBACxB,WAAW;gBACX,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG;oBACjC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;oBAC5B,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;gBAC7B,CAAC,CAAC,CAAA;gBACF,IAAI,IAAI,CAAC,WAAW,EAAE;oBAClB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC3B;aACJ;iBACI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBACxB,oBAAU,CAAC,QAAQ,CAAC,WAAW,CAAC;oBAC5B,0BAA0B;oBAC1B,yCAAyC;oBACzC,KAAI,CAAC,YAAY,IAAI,CAAC,CAAC;oBACvB,KAAI,CAAC,UAAU,EAAE,CAAA;oBACjB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBAC5B,CAAC,EAAE;oBACC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;gBACzB,CAAC,CAAC,CAAA;aACL;SACJ;aACI;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;YACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;YACvB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;YACrB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;YACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;YACpB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;YACxB,WAAW;YACX,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG;gBACjC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;gBAC5B,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;YAC7B,CAAC,CAAC,CAAA;YACF,IAAI,IAAI,CAAC,WAAW,EAAE;gBAClB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC3B;SACJ;IACL,CAAC;IAED,cAAc;IACd,oCAAgB,GAAhB;QAAA,iBAgDC;QA/CG,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,MAAM;YAAE,OAAM;QAClE,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;QACtD,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;YACxC,IAAI,IAAI,CAAC,eAAe,GAAG,CAAC,EAAE;gBAC1B,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;gBACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;gBACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;gBACtB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAA;gBACxB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;gBACpB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;gBACxB,QAAQ;gBACR,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG;oBACjC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;oBAC5B,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;gBAC7B,CAAC,CAAC,CAAA;gBACF,IAAI,IAAI,CAAC,cAAc,EAAE;oBACrB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBAC9B;aACJ;iBACI,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;gBAC3B,oBAAU,CAAC,QAAQ,CAAC,WAAW,CAAC;oBAC5B,0BAA0B;oBAC1B,yCAAyC;oBACzC,KAAI,CAAC,eAAe,IAAI,CAAC,CAAC;oBAC1B,KAAI,CAAC,UAAU,EAAE,CAAA;oBACjB,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;gBAC/B,CAAC,EAAE;oBACC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;gBACzB,CAAC,CAAC,CAAA;aACL;SACJ;aACI;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;YACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;YACtB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAA;YACxB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;YACpB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;YACxB,QAAQ;YACR,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG;gBACjC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;gBAC5B,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;YAC7B,CAAC,CAAC,CAAA;YACF,IAAI,IAAI,CAAC,cAAc,EAAE;gBACrB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aAC9B;SACJ;IACL,CAAC;IAED,aAAa;IACb,+BAAW,GAAX;QAAA,iBAsCC;QArCG,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,MAAM;YAAE,OAAM;QAClE,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;QACtD,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;YACxC,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;gBACrB,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;gBACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;gBACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;gBACtB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;gBACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA;gBACnB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;gBACxB,IAAI,IAAI,CAAC,SAAS,EAAE;oBAChB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBACzB;aACJ;iBACI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACtB,oBAAU,CAAC,QAAQ,CAAC,WAAW,CAAC;oBAC5B,0BAA0B;oBAC1B,yCAAyC;oBACzC,KAAI,CAAC,UAAU,IAAI,CAAC,CAAC;oBACrB,KAAI,CAAC,UAAU,EAAE,CAAA;oBACjB,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBAC1B,CAAC,EAAE;oBACC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;gBACzB,CAAC,CAAC,CAAA;aACL;SACJ;aACI;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;YACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;YACtB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;YACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA;YACnB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;YACxB,IAAI,IAAI,CAAC,SAAS,EAAE;gBAChB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACzB;SACJ;IACL,CAAC;IAED,aAAa;IACb,mCAAe,GAAf;QAAA,iBAsCC;QArCG,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,MAAM;YAAE,OAAM;QAClE,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;QACtD,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;YACxC,IAAI,IAAI,CAAC,cAAc,GAAG,CAAC,EAAE;gBACzB,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;gBACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;gBACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;gBACtB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;gBACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;gBACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAA;gBACvB,IAAI,IAAI,CAAC,aAAa,EAAE;oBACpB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAC7B;aACJ;iBACI,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;gBAC1B,oBAAU,CAAC,QAAQ,CAAC,WAAW,CAAC;oBAC5B,0BAA0B;oBAC1B,yCAAyC;oBACzC,KAAI,CAAC,cAAc,IAAI,CAAC,CAAC;oBACzB,KAAI,CAAC,UAAU,EAAE,CAAA;oBACjB,KAAI,CAAC,aAAa,GAAG,IAAI,CAAC;gBAC9B,CAAC,EAAE;oBACC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;gBACzB,CAAC,CAAC,CAAA;aACL;SACJ;aACI;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;YACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;YACvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;YACtB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;YACzB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;YACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAA;YACvB,IAAI,IAAI,CAAC,aAAa,EAAE;gBACpB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aAC7B;SACJ;IACL,CAAC;IAED,gCAAY,GAAZ;QACI,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;YACvB,MAAM;YACN,qBAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;gBACnC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;YAC/B,CAAC,CAAC,CAAA;YACF,IAAM,QAAQ,GAAG,qBAAW,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAA;YACnD,IAAI,QAAQ;gBAAE,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;SAC/C;QACD,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;YACtB,OAAO;YACP,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG;gBACjC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;gBAC5B,GAAG,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;YAC9B,CAAC,CAAC,CAAA;SACL;QACD,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;YACzB,OAAO;YACP,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG;gBACjC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;gBAC5B,GAAG,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;YAC9B,CAAC,CAAC,CAAA;SACL;QACD,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;QACtC,IAAI,IAAI,CAAC,WAAW;YAAE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;QAC9C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;IAC3B,CAAC;IAED,gCAAY,GAAZ,UAAa,eAAuB;QAApC,iBAkDC;QAlDY,gCAAA,EAAA,uBAAuB;QAChC,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE;YACd,IAAI,CAAC,WAAW,EAAE,CAAC;SACtB;QACD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,eAAe,EAAE;YAClB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC9B;QACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC1B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC7B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5B,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC;QACvB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,KAAG,qBAAW,CAAC,QAAQ,CAAC,KAAO,CAAA;QACxD,IAAI,CAAC,sBAAsB,EAAE,CAAA;QAC7B,IAAI,CAAC,QAAQ,CAAC;YACV,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,GAAG;mBAChD,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,IAAI,EAAE;gBACzD,KAAI,CAAC,sBAAsB,EAAE,CAAA;aAChC;YACD,IAAI,qBAAW,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,EAAE;gBACjC,KAAI,CAAC,sBAAsB,EAAE,CAAA;gBAE7B,SAAS;gBACT,IAAI,KAAI,CAAC,UAAU;oBAAE,KAAI,CAAC,UAAU,GAAG,KAAK,CAAA;gBAC5C,IAAI,KAAI,CAAC,SAAS;oBAAE,KAAI,CAAC,SAAS,GAAG,KAAK,CAAA;gBAC1C,IAAI,KAAI,CAAC,YAAY;oBAAE,KAAI,CAAC,YAAY,GAAG,KAAK,CAAA;gBAChD,IAAI,KAAI,CAAC,OAAO;oBAAE,KAAI,CAAC,OAAO,GAAG,KAAK,CAAA;gBACtC,IAAI,KAAI,CAAC,WAAW;oBAAE,KAAI,CAAC,WAAW,GAAG,KAAK,CAAA;gBAC9C,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;gBAEvB,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,GAAG,EAAE;oBACrD,sBAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAe,CAAC,SAAS,EAAE,KAAK,CAAC,CAAA;iBAC/D;aACJ;YACD,IAAI,qBAAW,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,EAAE;gBACjC,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;aACzD;YACD,qBAAW,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAA;YAC5B,KAAI,CAAC,UAAU,CAAC,MAAM,GAAG,KAAG,qBAAW,CAAC,QAAQ,CAAC,KAAO,CAAA;QAC5D,CAAC,EAAE,CAAC,CAAC,CAAA;IACT,CAAC;IAED,+BAAW,GAAX;QACI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,EAAE,CAAA;QAC3B,IAAI,CAAC,sBAAsB,EAAE,CAAA;IAEjC,CAAC;IAED,gCAAY,GAAZ;QACI,uCAAuC;QACvC,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,MAAM,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,QAAQ;YAAE,OAAM;QAC9H,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,WAAW;YAAE,OAAM;QACtG,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAA;IACxB,CAAC;IAED,8BAAU,GAAV,UAAW,CAAsB;QAC7B,IAAM,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,CAAA;QAChC,KAAK;QACL,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAM,MAAM,GAAG,qBAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAA;YACzE,IAAI,MAAM,EAAE;gBACR,OAAO;gBACP,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;gBACvB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;gBACvB,MAAM;gBACN,qBAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,UAAA,IAAI;oBACnC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;gBAC/B,CAAC,CAAC,CAAA;gBACF,OAAO;gBACP,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;oBACvC,qBAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;iBACvC;qBACI;oBACD,IAAI,CAAC,aAAa,EAAE,CAAC;iBACxB;gBACD,IAAI,CAAC,UAAU,EAAE,CAAA;gBACjB,MAAM;gBACN,IAAM,KAAK,GAAG,qBAAW,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAA;gBACjD,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAA;gBAChC,KAAK;gBACL,sBAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAe,CAAC,YAAY,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,YAAY,CAAC,gBAAM,CAAC,EAAE,CAAC,CAAA;aAC/G;YACD,OAAM;SACT;QACD,KAAK;QACL,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAM,QAAM,GAAG,qBAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAA;YACxE,IAAI,QAAM,EAAE;gBACR,OAAO;gBACP,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;gBACtB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;gBACvB,OAAO;gBACP,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG;oBACjC,IAAI,QAAM,EAAE;wBACR,IAAI,QAAM,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI;4BAAE,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;qBACjE;yBAAM;wBACH,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;qBAC/B;oBACD,GAAG,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;gBAC9B,CAAC,CAAC,CAAA;gBACF,OAAO;gBACP,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;oBACvC,qBAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;iBACvC;qBACI;oBACD,IAAI,CAAC,YAAY,EAAE,CAAC;iBACvB;gBACD,IAAI,CAAC,UAAU,EAAE,CAAA;gBACjB,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;gBACtD,QAAM,CAAC,YAAY,CAAC,eAAK,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;gBACtC,QAAM,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,CAAA;gBACxC,IAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,CAAA;gBAChD,EAAE,CAAC,KAAK,CAAC,QAAM,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;oBACpE,QAAM,CAAC,MAAM,GAAG,KAAK,CAAA;gBACzB,CAAC,CAAC,CAAC,KAAK,EAAE,CAAA;aACb;YACD,OAAM;SACT;QACD,KAAK;QACL,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,IAAM,QAAM,GAAG,qBAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAA;YACxE,IAAI,QAAM,EAAE;gBACR,OAAO;gBACP,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;gBACzB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;gBACvB,OAAO;gBACP,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,UAAA,GAAG;oBACjC,IAAI,QAAM,EAAE;wBACR,IAAI,QAAM,CAAC,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI;4BAAE,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;qBACjE;yBAAM;wBACH,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA;qBAC/B;oBACD,GAAG,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;gBAC9B,CAAC,CAAC,CAAA;gBACF,OAAO;gBACP,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;oBACvC,qBAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;iBACvC;qBACI;oBACD,IAAI,CAAC,eAAe,EAAE,CAAC;iBAC1B;gBACD,IAAI,CAAC,UAAU,EAAE,CAAA;gBACjB,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,QAAQ,CAAC,CAAA;aAC5D;YACD,OAAM;SACT;QACD,KAAK;QACL,IAAI,IAAI,CAAC,OAAO,EAAE;YACd,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;YACpB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;YACvB,OAAO;YACP,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;gBACvC,qBAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;aACvC;iBACI;gBACD,IAAI,CAAC,UAAU,EAAE,CAAC;aACrB;YACD,IAAI,CAAC,UAAU,EAAE,CAAA;YACjB,qBAAW,CAAC,QAAQ,CAAC,eAAe,GAAG,CAAC,CAAA;YACxC,qBAAW,CAAC,QAAQ,CAAC,UAAU,GAAG,qBAAW,CAAC,QAAQ,CAAC,gBAAgB,CAAA;YACvE,IAAI,CAAC,WAAW,EAAE,CAAA;YAClB,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;YACtD,OAAM;SACT;QACD,KAAK;QACL,IAAI,IAAI,CAAC,WAAW,EAAE;YAClB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;YACxB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;YACvB,OAAO;YACP,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;gBACvC,qBAAW,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;aACvC;iBACI;gBACD,IAAI,CAAC,cAAc,EAAE,CAAC;aACzB;YACD,IAAI,CAAC,UAAU,EAAE,CAAA;YACjB,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;YACtD,qBAAW,CAAC,QAAQ,CAAC,KAAK,IAAI,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAA;YAC5D,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAA;YACvB,OAAM;SACT;QACD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAA;QACrB,sBAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,sBAAe,CAAC,YAAY,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAA;IAClG,CAAC;IAES,0BAAM,GAAhB,UAAiB,EAAU;QACvB,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE;YAChC,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,aAAa,GAAG,EAAE,GAAG,CAAC,CAAA;YACrD,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC;gBAAE,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAA;SAC7D;aAAM;YACH,IAAI,qBAAW,CAAC,QAAQ,CAAC,MAAM,IAAI,uBAAgB,CAAC,MAAM,EAAE;gBACxD,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,CAAC,CAAA;aAC7B;SACJ;IACL,CAAC;IAES,6BAAS,GAAnB;QACI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACtE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAClE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QACrE,sBAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,sBAAe,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAA;IAC7E,CAAC;IAED,+BAAW,GAAX;QACI,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,KAAK,CAAC;QACpC,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC;QAClC,oBAAU,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAA;IAC7C,CAAC;IACD,6BAAS,GAAT;QACI,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE;YACd,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC;YACnC,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,KAAK,CAAC;YACnC,oBAAU,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAA;SAC1C;IACL,CAAC;IACO,0BAAM,GAAd,UAAe,IAAe;QAC1B,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,EAAE,CAAC,eAAe,CAAC,iBAAiB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,CAAC;QAC7E,wLAAwL;QACxL,0LAA0L;IAC9L,CAAC;IACO,wBAAI,GAAZ,UAAa,IAAe;QACxB,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,EAAE,CAAC,eAAe,CAAC,iBAAiB,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC,CAAC;QAClF,6LAA6L;QAC7L,+LAA+L;IACnM,CAAC;IA/nBD;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;+CACM;IAE/B;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;+CACM;IAE/B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;iDACQ;IAE3B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACO;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;+CACM;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;gDACO;IAa1B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;+CACM;IAE1B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;8CACK;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;iDACQ;IAE5B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;4CACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;gDACO;IAlCV,SAAS;QAD7B,OAAO;OACa,SAAS,CAmoB7B;IAAD,gBAAC;CAnoBD,AAmoBC,CAnoBsC,mBAAS,GAmoB/C;kBAnoBoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["// Created by carolsail\r\n\r\nimport Enemy from \"../Enemy\";\r\nimport { ENUM_AUDIO_CLIP, ENUM_GAME_EVENT, ENUM_GAME_STATUS, ENUM_PLAYER_STATUS, ENUM_UI_TYPE } from \"../Enum\";\r\nimport AudioManager from \"../manager/AudioManager\";\r\nimport DataManager from \"../manager/DataManager\";\r\nimport EventManager from \"../manager/EventManager\";\r\nimport SdkManager from \"../manager/SdkManager\";\r\nimport Player from \"../Player\";\r\nimport { StaticInstance } from \"../StaticInstance\";\r\nimport { getRandom } from \"../Utils\";\r\nimport BaseLayer from \"./Baselayer\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameLayer extends BaseLayer {\r\n\r\n    @property(cc.ProgressBar)\r\n    forceBar: cc.ProgressBar = null\r\n    @property(cc.ProgressBar)\r\n    powerBar: cc.ProgressBar = null\r\n    @property(cc.Label)\r\n    timerLabel: cc.Label = null\r\n    @property(cc.Node)\r\n    propsNode: cc.Node = null\r\n    @property(cc.Node)\r\n    tipsNode: cc.Node = null\r\n    @property(cc.Label)\r\n    teamLabel: cc.Label = null\r\n    // 点按状态\r\n    holdFlag: boolean = false\r\n    progressSpeed: number = 3\r\n    //技能\r\n    isPassBall: boolean = false\r\n    isRedCard: boolean = false\r\n    isYellowCard: boolean = false\r\n    isDrink: boolean = false\r\n    isExtraTime: boolean = false\r\n    startRecordNode: cc.Node = null;\r\n    stopRecordNode: cc.Node = null;\r\n    @property(cc.Sprite)\r\n    passBall: cc.Sprite = null\r\n    @property(cc.Sprite)\r\n    redCard: cc.Sprite = null\r\n    @property(cc.Sprite)\r\n    yellowCard: cc.Sprite = null\r\n    @property(cc.Sprite)\r\n    drink: cc.Sprite = null\r\n    @property(cc.Sprite)\r\n    extraTime: cc.Sprite = null\r\n    passBallOnce: boolean = false\r\n    redCardOnce: boolean = false\r\n    yellowCardOnce: boolean = false\r\n    drinkOnce: boolean = false\r\n    extraTimeOnce: boolean = false\r\n    passBallCount: number = 0\r\n    redCardCount: number = 0\r\n    yellowCardCount: number = 0\r\n    drinkCount: number = 0\r\n    extraTimeCount: number = 0\r\n\r\n    protected onLoad(): void {\r\n        this.startRecordNode = this.node.getChildByName('Panel').getChildByName('camrea_btn');\r\n        this.startRecordNode.on('click', () => {\r\n            this.startRecord()\r\n        }, this)\r\n        this.stopRecordNode = this.node.getChildByName('Panel').getChildByName('camrea_sotp_btn')\r\n        this.stopRecordNode.on('click', () => {\r\n            this.endRecord();\r\n        }, this)\r\n        if (!window[\"tt\"]) {\r\n            this.startRecordNode.active = false;\r\n            this.stopRecordNode.active = false;\r\n        }\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchstart, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchend, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchend, this);\r\n        EventManager.instance.on(ENUM_GAME_EVENT.TIMER_START, this.onTimerStart, this)\r\n        EventManager.instance.on(ENUM_GAME_EVENT.TIMER_STOP, this.onTimerStop, this)\r\n        EventManager.instance.emit(ENUM_GAME_EVENT.GAME_RESTART)\r\n        // 取消技能选择\r\n        if (this.isPassBall) this.isPassBall = false\r\n        if (this.isRedCard) this.isRedCard = false\r\n        if (this.isYellowCard) this.isYellowCard = false\r\n        if (this.isDrink) this.isDrink = false\r\n        if (this.isExtraTime) this.isExtraTime = false\r\n        this.setTipsNode(false)\r\n    }\r\n\r\n    onSettingClick() {\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        StaticInstance.uiManager.toggle(ENUM_UI_TYPE.SETTING)\r\n        EventManager.instance.emit(ENUM_GAME_EVENT.RENDOR_HOME_BTN, true)\r\n    }\r\n\r\n    // 设置技能点ui\r\n    setPropNum() {\r\n        this.propsNode.children.forEach((prop, index) => {\r\n            const nums = prop.getChildByName('Nums')\r\n            const video = prop.getChildByName('video')\r\n            if (DataManager.instance.skillNums[index] > 0) {\r\n                nums.active = true;\r\n                video.active = false;\r\n                let num = DataManager.instance.skillNums[index];\r\n                if (index == 1) {\r\n                    num = num + this.redCardCount;\r\n                }\r\n                nums.getChildByName('Label').getComponent(cc.Label).string = `${num}`\r\n            }\r\n            else if ((index == 0) && (this.passBallCount > 0 || this.passBallOnce)) {\r\n                nums.active = true;\r\n                video.active = false;\r\n                nums.getChildByName('Label').getComponent(cc.Label).string = `${this.passBallCount}`\r\n            }\r\n            else if ((index == 1) && (this.redCardCount > 0 || this.redCardOnce)) {\r\n                nums.active = true;\r\n                video.active = false;\r\n                nums.getChildByName('Label').getComponent(cc.Label).string = `${this.redCardCount}`\r\n            }\r\n            else if ((index == 2) && (this.yellowCardCount > 0 || this.yellowCardOnce)) {\r\n                nums.active = true;\r\n                video.active = false;\r\n                nums.getChildByName('Label').getComponent(cc.Label).string = `${this.yellowCardCount}`\r\n            }\r\n            else if ((index == 3) && (this.drinkCount > 0 || this.drinkOnce)) {\r\n                nums.active = true;\r\n                video.active = false;\r\n                nums.getChildByName('Label').getComponent(cc.Label).string = `${this.drinkCount}`\r\n            }\r\n            else if ((index == 4) && (this.extraTimeCount > 0 || this.extraTimeOnce)) {\r\n                nums.active = true;\r\n                video.active = false;\r\n                nums.getChildByName('Label').getComponent(cc.Label).string = `${this.extraTimeCount}`\r\n            }\r\n            else {\r\n                nums.active = false;\r\n                video.active = true;\r\n            }\r\n        })\r\n    }\r\n\r\n    setTeamLabel() {\r\n        this.teamLabel.string = DataManager.instance.currentData['info'].team\r\n    }\r\n\r\n    setPowerBar() {\r\n        this.powerBar.progress = DataManager.instance.powerCount / DataManager.instance.powerCountTarget\r\n    }\r\n\r\n    setTipsNode(status: boolean, styleIndex: number = 0) {\r\n        this.tipsNode.getChildByName('Style').children.forEach((item, index) => {\r\n            item.active = styleIndex === index ? true : false\r\n        })\r\n        this.tipsNode.active = status\r\n    }\r\n\r\n    // 选队友传球\r\n    onPropPassBall() {\r\n        if (DataManager.instance.status != ENUM_GAME_STATUS.RUNING) return\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        if (DataManager.instance.skillNums[0] <= 0) {\r\n            if (this.passBallCount > 0) {\r\n                // 脚下框动画\r\n                DataManager.instance.blues.forEach(blue => {\r\n                    if (blue.status != ENUM_PLAYER_STATUS.READY) blue.setCircleActive(true)\r\n                })\r\n                this.setTipsNode(true, 0)\r\n                this.isPassBall = true\r\n                this.isRedCard = false\r\n                this.isYellowCard = false\r\n                this.isDrink = false\r\n                this.isExtraTime = false\r\n                if (this.passBallOnce) {\r\n                    this.grey(this.passBall);\r\n                }\r\n            }\r\n            else if (!this.passBallOnce) {\r\n                SdkManager.instance.videoAdShow(() => {\r\n                    // console.log('激励视频成功回调')\r\n                    // DataManager.instance.skillNums[0] += 1\r\n                    this.passBallCount += 1;\r\n                    this.setPropNum()\r\n                    this.passBallOnce = true;\r\n                }, () => {\r\n                    console.log('激励视频有误')\r\n                })\r\n            }\r\n        }\r\n        else {\r\n            // 脚下框动画\r\n            DataManager.instance.blues.forEach(blue => {\r\n                if (blue.status != ENUM_PLAYER_STATUS.READY) blue.setCircleActive(true)\r\n            })\r\n            this.setTipsNode(true, 0)\r\n            this.isPassBall = true\r\n            this.isRedCard = false\r\n            this.isYellowCard = false\r\n            this.isDrink = false\r\n            this.isExtraTime = false\r\n            if (this.passBallOnce) {\r\n                this.grey(this.passBall);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 红牌罚下一名防守员\r\n    onPropRedCard() {\r\n        if (DataManager.instance.status != ENUM_GAME_STATUS.RUNING) return\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        if (DataManager.instance.skillNums[1] <= 0) {\r\n            if (this.redCardCount > 0) {\r\n                this.setTipsNode(true, 1)\r\n                this.isPassBall = false\r\n                this.isRedCard = true\r\n                this.isYellowCard = false\r\n                this.isDrink = false\r\n                this.isExtraTime = false\r\n                // 先减速运动待选择\r\n                DataManager.instance.reds.forEach(red => {\r\n                    red.setSpeed(red.speed / 10)\r\n                    red.setCircleActive(true)\r\n                })\r\n                if (this.redCardOnce) {\r\n                    this.grey(this.redCard);\r\n                }\r\n            }\r\n            else if (!this.redCardOnce) {\r\n                SdkManager.instance.videoAdShow(() => {\r\n                    // console.log('激励视频成功回调')\r\n                    // DataManager.instance.skillNums[1] += 1\r\n                    this.redCardCount += 1;\r\n                    this.setPropNum()\r\n                    this.redCardOnce = true;\r\n                }, () => {\r\n                    console.log('激励视频有误')\r\n                })\r\n            }\r\n        }\r\n        else {\r\n            this.setTipsNode(true, 1)\r\n            this.isPassBall = false\r\n            this.isRedCard = true\r\n            this.isYellowCard = false\r\n            this.isDrink = false\r\n            this.isExtraTime = false\r\n            // 先减速运动待选择\r\n            DataManager.instance.reds.forEach(red => {\r\n                red.setSpeed(red.speed / 10)\r\n                red.setCircleActive(true)\r\n            })\r\n            if (this.redCardOnce) {\r\n                this.grey(this.redCard);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 黄牌降低一名防守员速度\r\n    onPropYellowCard() {\r\n        if (DataManager.instance.status != ENUM_GAME_STATUS.RUNING) return\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        if (DataManager.instance.skillNums[2] <= 0) {\r\n            if (this.yellowCardCount > 0) {\r\n                this.setTipsNode(true, 2)\r\n                this.isPassBall = false\r\n                this.isRedCard = false\r\n                this.isYellowCard = true\r\n                this.isDrink = false\r\n                this.isExtraTime = false\r\n                // 先降速运动\r\n                DataManager.instance.reds.forEach(red => {\r\n                    red.setSpeed(red.speed / 10)\r\n                    red.setCircleActive(true)\r\n                })\r\n                if (this.yellowCardOnce) {\r\n                    this.grey(this.yellowCard);\r\n                }\r\n            }\r\n            else if (!this.yellowCardOnce) {\r\n                SdkManager.instance.videoAdShow(() => {\r\n                    // console.log('激励视频成功回调')\r\n                    // DataManager.instance.skillNums[2] += 1\r\n                    this.yellowCardCount += 1;\r\n                    this.setPropNum()\r\n                    this.yellowCardOnce = true;\r\n                }, () => {\r\n                    console.log('激励视频有误')\r\n                })\r\n            }\r\n        }\r\n        else {\r\n            this.setTipsNode(true, 2)\r\n            this.isPassBall = false\r\n            this.isRedCard = false\r\n            this.isYellowCard = true\r\n            this.isDrink = false\r\n            this.isExtraTime = false\r\n            // 先降速运动\r\n            DataManager.instance.reds.forEach(red => {\r\n                red.setSpeed(red.speed / 10)\r\n                red.setCircleActive(true)\r\n            })\r\n            if (this.yellowCardOnce) {\r\n                this.grey(this.yellowCard);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 饮品让能量持续3回合\r\n    onPropDrink() {\r\n        if (DataManager.instance.status != ENUM_GAME_STATUS.RUNING) return\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        if (DataManager.instance.skillNums[3] <= 0) {\r\n            if (this.drinkCount > 0) {\r\n                this.setTipsNode(true, 3)\r\n                this.isPassBall = false\r\n                this.isRedCard = false\r\n                this.isYellowCard = false\r\n                this.isDrink = true\r\n                this.isExtraTime = false\r\n                if (this.drinkOnce) {\r\n                    this.grey(this.drink);\r\n                }\r\n            }\r\n            else if (!this.drinkOnce) {\r\n                SdkManager.instance.videoAdShow(() => {\r\n                    // console.log('激励视频成功回调')\r\n                    // DataManager.instance.skillNums[3] += 1\r\n                    this.drinkCount += 1;\r\n                    this.setPropNum()\r\n                    this.drinkOnce = true;\r\n                }, () => {\r\n                    console.log('激励视频有误')\r\n                })\r\n            }\r\n        }\r\n        else {\r\n            this.setTipsNode(true, 3)\r\n            this.isPassBall = false\r\n            this.isRedCard = false\r\n            this.isYellowCard = false\r\n            this.isDrink = true\r\n            this.isExtraTime = false\r\n            if (this.drinkOnce) {\r\n                this.grey(this.drink);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 加时让时间增加30s\r\n    onPropExtraTime() {\r\n        if (DataManager.instance.status != ENUM_GAME_STATUS.RUNING) return\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        if (DataManager.instance.skillNums[4] <= 0) {\r\n            if (this.extraTimeCount > 0) {\r\n                this.setTipsNode(true, 4)\r\n                this.isPassBall = false\r\n                this.isRedCard = false\r\n                this.isYellowCard = false\r\n                this.isDrink = false\r\n                this.isExtraTime = true\r\n                if (this.extraTimeOnce) {\r\n                    this.grey(this.extraTime);\r\n                }\r\n            }\r\n            else if (!this.extraTimeOnce) {\r\n                SdkManager.instance.videoAdShow(() => {\r\n                    // console.log('激励视频成功回调')\r\n                    // DataManager.instance.skillNums[4] += 1\r\n                    this.extraTimeCount += 1;\r\n                    this.setPropNum()\r\n                    this.extraTimeOnce = true;\r\n                }, () => {\r\n                    console.log('激励视频有误')\r\n                })\r\n            }\r\n        }\r\n        else {\r\n            this.setTipsNode(true, 4)\r\n            this.isPassBall = false\r\n            this.isRedCard = false\r\n            this.isYellowCard = false\r\n            this.isDrink = false\r\n            this.isExtraTime = true\r\n            if (this.extraTimeOnce) {\r\n                this.grey(this.extraTime);\r\n            }\r\n        }\r\n    }\r\n\r\n    onPropCancel() {\r\n        if (this.isPassBall) {\r\n            this.isPassBall = false\r\n            // 取消框\r\n            DataManager.instance.blues.forEach(blue => {\r\n                blue.setCircleActive(false)\r\n            })\r\n            const nextBlue = DataManager.instance.getBlueNext()\r\n            if (nextBlue) nextBlue.setCircleActive(true)\r\n        }\r\n        if (this.isRedCard) {\r\n            this.isRedCard = false\r\n            // 恢复速度\r\n            DataManager.instance.reds.forEach(red => {\r\n                red.setSpeed(red.speed * 10)\r\n                red.setCircleActive(false)\r\n            })\r\n        }\r\n        if (this.isYellowCard) {\r\n            this.isYellowCard = false\r\n            // 恢复速度\r\n            DataManager.instance.reds.forEach(red => {\r\n                red.setSpeed(red.speed * 10)\r\n                red.setCircleActive(false)\r\n            })\r\n        }\r\n        if (this.isDrink) this.isDrink = false\r\n        if (this.isExtraTime) this.isExtraTime = false\r\n        this.setTipsNode(false)\r\n    }\r\n\r\n    onTimerStart(isExtraTimeOnce = false) {\r\n        if (window[\"tt\"]) {\r\n            this.startRecord();\r\n        }\r\n        this.passBallOnce = false;\r\n        this.redCardOnce = false;\r\n        this.yellowCardOnce = false;\r\n        this.drinkOnce = false;\r\n        if (!isExtraTimeOnce) {\r\n            this.extraTimeOnce = false;\r\n        }\r\n        this.normal(this.passBall);\r\n        this.normal(this.redCard);\r\n        this.normal(this.yellowCard);\r\n        this.normal(this.drink);\r\n        this.normal(this.extraTime);\r\n        this.passBallCount = 0;\r\n        this.redCardCount = 1;\r\n        this.yellowCardCount = 0;\r\n        this.drinkCount = 0;\r\n        this.extraTimeCount = 0;\r\n        this.setPropNum();\r\n        this.timerLabel.string = `${DataManager.instance.timer}`\r\n        this.unscheduleAllCallbacks()\r\n        this.schedule(() => {\r\n            if (DataManager.instance.status == ENUM_GAME_STATUS.WIN\r\n                || DataManager.instance.status == ENUM_GAME_STATUS.LOSE) {\r\n                this.unscheduleAllCallbacks()\r\n            }\r\n            if (DataManager.instance.timer <= 1) {\r\n                this.unscheduleAllCallbacks()\r\n\r\n                // 取消技能选择\r\n                if (this.isPassBall) this.isPassBall = false\r\n                if (this.isRedCard) this.isRedCard = false\r\n                if (this.isYellowCard) this.isYellowCard = false\r\n                if (this.isDrink) this.isDrink = false\r\n                if (this.isExtraTime) this.isExtraTime = false\r\n                this.setTipsNode(false)\r\n\r\n                if (DataManager.instance.status != ENUM_GAME_STATUS.WIN) {\r\n                    EventManager.instance.emit(ENUM_GAME_EVENT.GAME_LOSE, '时间到')\r\n                }\r\n            }\r\n            if (DataManager.instance.timer == 5) {\r\n                AudioManager.instance.playSound(ENUM_AUDIO_CLIP.SPELL)\r\n            }\r\n            DataManager.instance.timer--\r\n            this.timerLabel.string = `${DataManager.instance.timer}`\r\n        }, 1)\r\n    }\r\n\r\n    onTimerStop() {\r\n        this.timerLabel.string = ''\r\n        this.unscheduleAllCallbacks()\r\n\r\n    }\r\n\r\n    onTouchstart() {\r\n        // this.progressSpeed = getRandom(2, 5)\r\n        if (DataManager.instance.status != ENUM_GAME_STATUS.RUNING && DataManager.instance.status == ENUM_GAME_STATUS.SHOOTING) return\r\n        if (this.isPassBall || this.isRedCard || this.isYellowCard || this.isDrink || this.isExtraTime) return\r\n        this.holdFlag = true\r\n    }\r\n\r\n    onTouchend(e: cc.Event.EventTouch) {\r\n        const location = e.getLocation()\r\n        // 传球\r\n        if (this.isPassBall) {\r\n            const target = DataManager.instance.getPassPlayer(location.x, location.y)\r\n            if (target) {\r\n                // 取消技能\r\n                this.isPassBall = false\r\n                this.setTipsNode(false)\r\n                // 取消框\r\n                DataManager.instance.blues.forEach(blue => {\r\n                    blue.setCircleActive(false)\r\n                })\r\n                // 扣技能点\r\n                if (DataManager.instance.skillNums[0] > 0) {\r\n                    DataManager.instance.cutSkillNums(0)\r\n                }\r\n                else {\r\n                    this.passBallCount--;\r\n                }\r\n                this.setPropNum()\r\n                // 先转向\r\n                const ready = DataManager.instance.getBlueReady()\r\n                ready.turnTo(target.x, target.y)\r\n                // 传球\r\n                EventManager.instance.emit(ENUM_GAME_EVENT.PLAYER_SHOOT, { progress: 1, next: target.getComponent(Player) })\r\n            }\r\n            return\r\n        }\r\n        // 红牌\r\n        if (this.isRedCard) {\r\n            const target = DataManager.instance.getCardEnemy(location.x, location.y)\r\n            if (target) {\r\n                // 取消技能\r\n                this.isRedCard = false\r\n                this.setTipsNode(false)\r\n                // 恢复速度\r\n                DataManager.instance.reds.forEach(red => {\r\n                    if (target) {\r\n                        if (target.uuid != red.node.uuid) red.setSpeed(red.speed * 10)\r\n                    } else {\r\n                        red.setSpeed(red.speed * 10)\r\n                    }\r\n                    red.setCircleActive(false)\r\n                })\r\n                // 扣技能点\r\n                if (DataManager.instance.skillNums[1] > 0) {\r\n                    DataManager.instance.cutSkillNums(1)\r\n                }\r\n                else {\r\n                    this.redCardCount--;\r\n                }\r\n                this.setPropNum()\r\n                AudioManager.instance.playSound(ENUM_AUDIO_CLIP.LAUGH)\r\n                target.getComponent(Enemy).setSpeed(0)\r\n                target.getComponent(cc.Animation).play()\r\n                const toPos = this.timerLabel.node.getPosition()\r\n                cc.tween(target).to(0.2, { position: cc.v3(toPos.x, toPos.y, 0) }).call(() => {\r\n                    target.active = false\r\n                }).start()\r\n            }\r\n            return\r\n        }\r\n        // 黄牌\r\n        if (this.isYellowCard) {\r\n            const target = DataManager.instance.getCardEnemy(location.x, location.y)\r\n            if (target) {\r\n                // 取消技能\r\n                this.isYellowCard = false\r\n                this.setTipsNode(false)\r\n                // 恢复速度\r\n                DataManager.instance.reds.forEach(red => {\r\n                    if (target) {\r\n                        if (target.uuid != red.node.uuid) red.setSpeed(red.speed * 10)\r\n                    } else {\r\n                        red.setSpeed(red.speed * 10)\r\n                    }\r\n                    red.setCircleActive(false)\r\n                })\r\n                // 扣技能点\r\n                if (DataManager.instance.skillNums[2] > 0) {\r\n                    DataManager.instance.cutSkillNums(2)\r\n                }\r\n                else {\r\n                    this.yellowCardCount--;\r\n                }\r\n                this.setPropNum()\r\n                AudioManager.instance.playSound(ENUM_AUDIO_CLIP.SLOWDOWN)\r\n            }\r\n            return\r\n        }\r\n        // 饮品\r\n        if (this.isDrink) {\r\n            this.isDrink = false\r\n            this.setTipsNode(false)\r\n            // 扣技能点\r\n            if (DataManager.instance.skillNums[3] > 0) {\r\n                DataManager.instance.cutSkillNums(3)\r\n            }\r\n            else {\r\n                this.drinkCount--;\r\n            }\r\n            this.setPropNum()\r\n            DataManager.instance.powerEffectLoop = 2\r\n            DataManager.instance.powerCount = DataManager.instance.powerCountTarget\r\n            this.setPowerBar()\r\n            AudioManager.instance.playSound(ENUM_AUDIO_CLIP.SKILL)\r\n            return\r\n        }\r\n        // 加时\r\n        if (this.isExtraTime) {\r\n            this.isExtraTime = false\r\n            this.setTipsNode(false)\r\n            // 扣技能点\r\n            if (DataManager.instance.skillNums[4] > 0) {\r\n                DataManager.instance.cutSkillNums(4)\r\n            }\r\n            else {\r\n                this.extraTimeCount--;\r\n            }\r\n            this.setPropNum()\r\n            AudioManager.instance.playSound(ENUM_AUDIO_CLIP.TIMER)\r\n            DataManager.instance.timer += DataManager.instance.extraTime\r\n            this.onTimerStart(true)\r\n            return\r\n        }\r\n        this.holdFlag = false\r\n        EventManager.instance.emit(ENUM_GAME_EVENT.PLAYER_SHOOT, { progress: this.forceBar.progress })\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        if (this.holdFlag && this.forceBar) {\r\n            this.forceBar.progress += this.progressSpeed * dt / 2\r\n            if (this.forceBar.progress > 1) this.forceBar.progress = 0\r\n        } else {\r\n            if (DataManager.instance.status == ENUM_GAME_STATUS.RUNING) {\r\n                this.forceBar.progress = 0\r\n            }\r\n        }\r\n    }\r\n\r\n    protected onDisable(): void {\r\n        this.node.off(cc.Node.EventType.TOUCH_START, this.onTouchstart, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_END, this.onTouchend, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_CANCEL, this.onTouchend, this);\r\n        EventManager.instance.off(ENUM_GAME_EVENT.TIMER_START, this.onTimerStart)\r\n    }\r\n\r\n    startRecord() {\r\n        this.startRecordNode.active = false;\r\n        this.stopRecordNode.active = true;\r\n        SdkManager.instance.recordingVideoStart()\r\n    }\r\n    endRecord() {\r\n        if (window[\"tt\"]) {\r\n            this.startRecordNode.active = true;\r\n            this.stopRecordNode.active = false;\r\n            SdkManager.instance.recordingVideoEnd()\r\n        }\r\n    }\r\n    private normal(icon: cc.Sprite): void {\r\n        icon.setMaterial(0, cc.MaterialVariant.createWithBuiltin('2d-sprite', icon));\r\n        // icon.node.getChildByName(\"icon\").getComponent(cc.Sprite).setMaterial(0, cc.MaterialVariant.createWithBuiltin('2d-sprite', icon.node.getChildByName(\"icon\").getComponent(cc.Sprite)));\r\n        // icon.node.getChildByName(\"video\").getComponent(cc.Sprite).setMaterial(0, cc.MaterialVariant.createWithBuiltin('2d-sprite', icon.node.getChildByName(\"video\").getComponent(cc.Sprite)));\r\n    }\r\n    private grey(icon: cc.Sprite): void {\r\n        icon.setMaterial(0, cc.MaterialVariant.createWithBuiltin('2d-gray-sprite', icon));\r\n        // icon.node.getChildByName(\"icon\").getComponent(cc.Sprite).setMaterial(0, cc.MaterialVariant.createWithBuiltin('2d-gray-sprite', icon.node.getChildByName(\"icon\").getComponent(cc.Sprite)));\r\n        // icon.node.getChildByName(\"video\").getComponent(cc.Sprite).setMaterial(0, cc.MaterialVariant.createWithBuiltin('2d-gray-sprite', icon.node.getChildByName(\"video\").getComponent(cc.Sprite)));\r\n    }\r\n}\r\n"]}