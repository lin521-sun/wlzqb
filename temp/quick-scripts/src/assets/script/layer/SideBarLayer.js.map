{"version":3,"sources":["assets\\script\\layer\\SideBarLayer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gCAAwD;AACxD,oDAAmD;AACnD,wDAAmD;AACnD,sDAAiD;AACjD,yCAAoC;AAE9B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkC,gCAAS;IAA3C;QAAA,qEA6FC;QA3FW,iBAAW,GAAY,IAAI,CAAC;QAE5B,kBAAY,GAAY,IAAI,CAAC;QACrC,mBAAa,GAAY,KAAK,CAAC;;IAwFnC,CAAC;IAvFa,+BAAQ,GAAlB;QAAA,iBAsBC;QArBG,IAAM,KAAK,GAAG,qBAAW,CAAC,QAAQ,CAAC,aAAa,CAAA;QAChD,IAAI,KAAK,EAAE;YACP,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;aACI;YACD,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE;gBACd,EAAE,CAAC,MAAM,CAAC,UAAA,GAAG;oBACT,sBAAsB;oBACtB,aAAa;oBACb,KAAI,CAAC,aAAa,GAAG,GAAG,CAAC,KAAK,KAAK,SAAS,CAAC;oBAC7C,mCAAmC;oBACnC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;oBAC3B,IAAI,KAAI,CAAC,WAAW,EAAE;wBAClB,KAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,qBAAqB;qBACvE;oBACD,IAAI,KAAI,CAAC,YAAY,EAAE;wBACnB,KAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAI,CAAC,aAAa,CAAC,CAAC,mBAAmB;qBACrE;gBACL,CAAC,CAAC,CAAC;aACN;SACJ;IACL,CAAC;IAED,gCAAS,GAAT;QACI,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;IACrC,CAAC;IAED,iCAAU,GAAV;QACI,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;QACtD,+BAAc,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAY,CAAC,YAAY,EAAE,KAAK,CAAC,CAAA;IACrE,CAAC;IAED,uCAAgB,GAAhB;QACI,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;QACtD,uCAAuC;QACvC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC5D,qBAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;SAC1C;QACD,qBAAW,CAAC,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1C,IAAI,CAAC,SAAS,EAAE,CAAC;IACrB,CAAC;IACD,mCAAY,GAAZ;QACI,sBAAY,CAAC,QAAQ,CAAC,SAAS,CAAC,sBAAe,CAAC,KAAK,CAAC,CAAA;QACtD,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE;YACd,EAAE,CAAC,UAAU,CAAC;gBACV,iBAAiB;gBACjB,KAAK,EAAE,SAAS;gBAChB,OAAO,EAAE,UAAC,GAAQ;oBACd,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;oBACnC,IAAI,GAAG,CAAC,OAAO,EAAE;wBACb,eAAe;wBACf,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;wBAC7B,iBAAiB;wBACjB,EAAE,CAAC,eAAe,CAAC;4BACf,KAAK,EAAE,SAAS;4BAChB,OAAO,EAAE,UAAC,GAAQ;gCACd,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;gCACpB,EAAE,CAAC,SAAS,CAAC;oCACT,KAAK,EAAE,MAAM;oCACb,gBAAgB;oCAChB,QAAQ,EAAE,IAAI;iCACjB,CAAC,CAAC;4BACP,CAAC;4BACD,IAAI,EAAE,UAAC,GAAQ;gCACX,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gCAC3B,WAAW;gCACX,EAAE,CAAC,SAAS,CAAC;oCACT,KAAK,EAAE,MAAM;oCACb,gBAAgB;oCAChB,QAAQ,EAAE,IAAI;iCACjB,CAAC,CAAC;4BACP,CAAC;yBACJ,CAAC,CAAC;qBACN;yBAAM;wBACH,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;wBAC9B,cAAc;qBACjB;gBACL,CAAC;gBACD,IAAI,EAAE,UAAC,GAAQ;oBACX,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;oBAC5B,uBAAuB;gBAC3B,CAAC;aACJ,CAAC,CAAC;SACN;IACL,CAAC;IA1FD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACkB;IAEpC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sDACmB;IAJ5B,YAAY;QADxB,OAAO;OACK,YAAY,CA6FxB;IAAD,mBAAC;CA7FD,AA6FC,CA7FiC,mBAAS,GA6F1C;AA7FY,oCAAY","file":"","sourceRoot":"/","sourcesContent":["import { ENUM_AUDIO_CLIP, ENUM_UI_TYPE } from '../Enum';\r\nimport { StaticInstance } from '../StaticInstance';\r\nimport AudioManager from '../manager/AudioManager';\r\nimport DataManager from '../manager/DataManager';\r\nimport BaseLayer from './Baselayer';\r\ndeclare let tt: any;\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class SideBarLayer extends BaseLayer {\r\n    @property(cc.Node)\r\n    private go_side_btn: cc.Node = null;\r\n    @property(cc.Node)\r\n    private get_gift_btn: cc.Node = null;\r\n    isFromSidebar: boolean = false;\r\n    protected onEnable(): void {\r\n        const value = DataManager.instance.SideBarReward\r\n        if (value) {\r\n            this.hiddenBtn();\r\n        }\r\n        else {\r\n            if (window[\"tt\"]) {\r\n                tt.onShow(res => {\r\n                    // 获取启动信息，可以判断是否从侧边栏启动\r\n                    // 判断是否从侧边栏启动\r\n                    this.isFromSidebar = res.scene === 'sidebar';\r\n                    // 在这里根据isFromSidebar的值显示或隐藏相关的按钮节点\r\n                    console.log('启动信息: ', res);\r\n                    if (this.go_side_btn) {\r\n                        this.go_side_btn.active = !this.isFromSidebar; // 根据启动状态判断是否显示去侧边栏按钮\r\n                    }\r\n                    if (this.get_gift_btn) {\r\n                        this.get_gift_btn.active = this.isFromSidebar; // 根据启动状态判断是否显示返回按钮\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    hiddenBtn() {\r\n        this.go_side_btn.active = false;\r\n        this.get_gift_btn.active = false;\r\n    }\r\n\r\n    onBtnClose(): void {\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        StaticInstance.uiManager.toggle(ENUM_UI_TYPE.SIDEBARLAYER, false)\r\n    }\r\n\r\n    onCblLingquClick() {\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        // EnergyMgr.ins.changeEnergy(true, 10)\r\n        for (let i = 0; i < DataManager.instance.skillNums.length; i++) {\r\n            DataManager.instance.skillNums[i] += 1;\r\n        }\r\n        DataManager.instance.SideBarReward = true;\r\n        this.hiddenBtn();\r\n    }\r\n    onGoCblClick() {\r\n        AudioManager.instance.playSound(ENUM_AUDIO_CLIP.CLICK)\r\n        if (window[\"tt\"]) {\r\n            tt.checkScene({\r\n                //判断当前宿主是否支持跳转侧边栏\r\n                scene: 'sidebar',\r\n                success: (res: any) => {\r\n                    console.log('检查结果: ', res.isExist);\r\n                    if (res.isExist) {\r\n                        // 展示奖励入口，进入步骤二\r\n                        console.log('当前宿主版本支持侧边栏场景');\r\n                        // 支持侧边栏场景，跳转到侧边栏\r\n                        tt.navigateToScene({\r\n                            scene: 'sidebar',\r\n                            success: (res: any) => {\r\n                                console.log('跳转成功');\r\n                                tt.showToast({\r\n                                    title: '跳转成功',\r\n                                    // icon: \"none\",\r\n                                    duration: 2000,\r\n                                });\r\n                            },\r\n                            fail: (res: any) => {\r\n                                console.log('跳转失败: ', res);\r\n                                // 跳转失败回调逻辑\r\n                                tt.showToast({\r\n                                    title: '跳转成功',\r\n                                    // icon: \"none\",\r\n                                    duration: 2000,\r\n                                });\r\n                            },\r\n                        });\r\n                    } else {\r\n                        console.log('当前宿主版本不支持侧边栏场景');\r\n                        // 显示提示或进行其他操作\r\n                    }\r\n                },\r\n                fail: (res: any) => {\r\n                    console.log('失败回调逻辑:', res);\r\n                    // 失败回调逻辑，显示错误信息或进行其他操作\r\n                },\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}